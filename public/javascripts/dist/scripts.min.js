"use strict";var app=angular.module("smartHomeApp",["ngRoute","light","colorpicker","group","brightness","wemo"]).config(["$routeProvider",function(r,o){r.when("/",{controller:"SmartHomeController"}),r.otherwise({redirectTo:"/"})}]);
"use strict";angular.module("light",["ng"]).directive("light",function(){return{restrict:"EA",replace:!0,scope:{model:"=",toggleLight:"="},templateUrl:"templates/light.html"}}),angular.module("group",["ng"]).directive("group",function(){return{restrict:"EA",replace:!0,scope:{toggleLight:"=",viewgroupstate:"="},templateUrl:"templates/group.html"}}),angular.module("colorpicker",["ng"]).directive("colorpicker",function(){return{restrict:"EA",replace:!0,scope:{model:"=",setColor:"=",lightid:"@"},templateUrl:"templates/colorpicker.html"}}),angular.module("brightness",["ng"]).directive("brightness",function(){return{restrict:"EA",replace:!0,scope:{model:"=",setColor:"=",lightid:"@"},templateUrl:"templates/brightness.html"}});
app.controller("SmartHomeController",["$scope","socket","$http",function(o,t,n){o.lightCount=0,o.isCollapsed=!0,o.groupstate="Lights";var e=!1;o.getLightsInfo=function(){t.emit("ready"),t.on("talk",function(n){angular.toJson(o.lightResponse)!=JSON.stringify(n.message)&&0==e&&(console.log(n.message),o.lightResponse=n.message,o.lightCount=n.message.length),t.emit("ready")})},o.getWemoInfo=function(n){"AC"!=n&&t.on("wemotalk",function(t){angular.toJson(o.wemoResponse)!=JSON.stringify(t.message)&&0==e&&(o.wemoResponse=t.message)})},o.toggle=function(t,s,i,a,g,c,l){console.log("curr state"+s),e=!0;var r="on";"on"==s?(s="off",r="off"):s="on";var f={};f.state=r,f.hue=i,f.bri=parseInt(a),f.sat=g,f.effect=c;var u=l?"groups/":"lights/";n.put("http://"+window.location.hostname+":"+window.location.port+"/"+u+t,JSON.stringify(f)).success(function(t){e=!1,l&&(o.groupstate=s)})},o.wakeUp=function(){for(var t=0;10>t;)setTimeout(function(){for(var t=1;t<=o.lightCount;t++)o.toggle(t,"off",0,255,255,""),o.toggle(t,"on")},100),t++},o.switchState=function(o){e=!0,n.put("http://"+window.location.hostname+":"+window.location.port+"/wemo/").success(function(o){e=!1})},o.switchACState=function(o){console.log("Switching AC ON/OFF")}}]);
app.factory("socket",["$rootScope",function(n){var o=io.connect("http://"+window.location.hostname+":7076");return{on:function(t,a){o.on(t,function(){var t=arguments;n.$apply(function(){a.apply(o,t)})})},emit:function(t,a,c){o.emit(t,a,function(){var t=arguments;n.$apply(function(){c&&c.apply(o,t)})})}}}]);
"use strict";angular.module("wemo",["ng"]).directive("wemo",function(){return{restrict:"EA",replace:!0,scope:{model:"=",toggle:"="},templateUrl:"templates/wemo.html"}});